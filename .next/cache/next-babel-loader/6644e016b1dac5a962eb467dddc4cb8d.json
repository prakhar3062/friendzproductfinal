{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { AuthForm } from \"./AuthForm\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport Button from \"@material-ui/core/Button\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport AccountBox from \"@material-ui/icons/AccountBox\";\nimport { unauthenticated } from \"../../redux/actions/auth\";\nimport Link from \"@material-ui/core/Link\";\nimport logo from './../../public/static/images/logo.png';\nimport circlecenter from './../../public/static/images/circleCenter.svg';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      \"& .MuiTab-textColorPrimary.Mui-selected\": {\n        color: \"#ffffff\",\n        background: \"var(--theme)\"\n      },\n      \"& .MuiTabs-indicator\": {\n        display: \"none\"\n      },\n      \"& .MuiTab-textColorPrimary\": {\n        background: \"#dfdfdf\"\n      },\n      \"& .MuiButton-containedPrimary\": {\n        marginTop: \"1rem\"\n      }\n    },\n    Login: _defineProperty({\n      position: \"relative\",\n      marginTop: \"5rem\",\n      \"&::before\": {\n        top: \"0\",\n        left: \"0\",\n        width: \"440px\",\n        height: \"440px\",\n        content: '\"\"',\n        zIndex: \"-1\",\n        position: \"absolute\",\n        transform: \"translate(-50%, -50%)\",\n        background: circlecenter,\n        backgroundSize: \"cover\",\n        backgroundRepeat: \"no-repeat\"\n      }\n    }, theme.breakpoints.down(\"sm\"), {\n      marginTop: '1.5rem'\n    }),\n    Img: _defineProperty({\n      textAlign: \"center\"\n    }, theme.breakpoints.down(\"sm\"), {\n      '& img': {\n        height: '65px'\n      }\n    }),\n    orange: {\n      color: \"#fff\",\n      backgroundColor: \"var(--theme)\",\n      width: \"30px\",\n      height: \"30px\",\n      fontSize: \"1rem\"\n    },\n    transparent: {\n      color: \"#000\",\n      width: \"30px\",\n      height: \"25px\",\n      backgroundColor: \"transparent\"\n    },\n    desktopMenu: {\n      '& .MuiPopover-paper': {\n        minWidth: '200px',\n        textAlign: 'right'\n      },\n      '& li': {\n        justifyContent: 'space-between'\n      }\n    }\n  };\n});\n\nvar Login_Register = function Login_Register(_ref) {\n  var _ref$isMobile = _ref.isMobile,\n      isMobile = _ref$isMobile === void 0 ? false : _ref$isMobile,\n      _ref$modalOpen = _ref.modalOpen,\n      modalOpen = _ref$modalOpen === void 0 ? false : _ref$modalOpen;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      value = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var router = useRouter();\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      anchorEl = _React$useState4[0],\n      setAnchorEl = _React$useState4[1];\n\n  var _useState2 = useState(false),\n      openAMenu = _useState2[0],\n      setopenAMenu = _useState2[1];\n\n  var _useState3 = useState(false),\n      openBMenu = _useState3[0],\n      setopenBMenu = _useState3[1];\n\n  var _useState4 = useState(false),\n      openCMenu = _useState4[0],\n      setopenCMenu = _useState4[1];\n\n  var _useState5 = useState(false),\n      openDMenu = _useState5[0],\n      setopenDMenu = _useState5[1];\n\n  var dispatch = useDispatch();\n\n  var toggleModal = function toggleModal() {\n    if (location.search.indexOf(\"signup=open\") != -1) {\n      setOpen(true);\n    } else if (modalOpen != open) {\n      setOpen(modalOpen);\n    }\n  };\n\n  useEffect(function () {\n    toggleModal();\n  }, [modalOpen]);\n  router.events.on('routeChangeComplete', toggleModal);\n  var accessToken = useSelector(function (state) {\n    return state.auth_user.accessToken;\n  });\n  var user = useSelector(function (state) {\n    return state.auth_user.user;\n  }); // console.log(\"User\", user);\n\n  var handleChange = function handleChange(event, newValue) {\n    setValue(newValue);\n  };\n\n  var handleChangeIndex = function handleChangeIndex(index) {\n    setValue(index);\n  };\n\n  var openModal = function openModal(event) {\n    if (!accessToken) {\n      setOpen(true);\n    } else {\n      if (isMobile) {\n        gotoProfile();\n      } else {\n        setAnchorEl(event.currentTarget);\n      }\n    }\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  var closeModal = function closeModal() {\n    setOpen(false);\n  };\n\n  var gotoProfile = function gotoProfile() {\n    router.push(\"/profile\");\n  };\n\n  var gotoProfileEdit = function gotoProfileEdit() {\n    router.push(\"/profile/edit\");\n  };\n\n  var gotoEvents = function gotoEvents() {\n    router.push(\"/profile/events\");\n  };\n\n  var gotoRequeste = function gotoRequeste() {\n    router.push(\"/profile/requests\");\n  };\n\n  var gotoFavEvents = function gotoFavEvents() {\n    router.push(\"/profile/favourite-events\");\n  };\n\n  var gotoFavProducts = function gotoFavProducts() {\n    router.push(\"/profile/favourite-products\");\n  };\n\n  var gotoAddRequest = function gotoAddRequest() {\n    router.push(\"/post/request\");\n  };\n\n  var gotoResetPassword = function gotoResetPassword() {\n    router.push(\"/profile/reset-password\");\n  };\n\n  var logout = function logout() {\n    setAnchorEl(null);\n    router.push(\"/\");\n    dispatch(unauthenticated());\n  };\n\n  var toggleASubmenu = function toggleASubmenu() {\n    setopenAMenu(!openAMenu);\n  };\n\n  var toggleBSubmenu = function toggleBSubmenu() {\n    setopenBMenu(!openBMenu);\n  };\n\n  var toggleCSubmenu = function toggleCSubmenu() {\n    setopenCMenu(!openCMenu);\n  };\n\n  var toggleDSubmenu = function toggleDSubmenu() {\n    setopenDMenu(!openDMenu);\n  };\n\n  var classes = useStyles();\n  return __jsx(\"div\", null, __jsx(Avatar, {\n    onClick: openModal,\n    \"aria-controls\": \"auth-menu\",\n    \"aria-haspopup\": \"true\",\n    className: user.first_name ? classes.orange : classes.transparent\n  }, user.first_name ? user.first_name.charAt(0) : __jsx(AccountCircleIcon, null)), __jsx(Menu, {\n    id: \"auth-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: handleClose // open={!!menuPosition}\n    // onClose={() => setMenuPosition({}) || handleClose}\n    // anchorReference=\"anchorPosition\"\n    // anchorPosition={menuPosition}\n    ,\n    className: classes.desktopMenu\n  }, __jsx(MenuItem, {\n    button: true,\n    onClick: toggleASubmenu\n  }, \"Profile\", openAMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    \"in\": openAMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoProfile\n  }, \"View Profile\"), __jsx(MenuItem, {\n    onClick: gotoResetPassword\n  }, \"Reset Password\")), __jsx(MenuItem, {\n    button: true,\n    onClick: toggleBSubmenu\n  }, \"Ads\", openBMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    \"in\": openBMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoProfile\n  }, \"Published Ads\"), __jsx(MenuItem, {\n    onClick: gotoFavProducts\n  }, \"Favourite Products\")), __jsx(MenuItem, {\n    button: true,\n    onClick: toggleCSubmenu\n  }, \"Events\", openCMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    \"in\": openCMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoEvents\n  }, \"Published Events\"), __jsx(MenuItem, {\n    onClick: gotoFavEvents\n  }, \"Favourite Events\")), __jsx(MenuItem, {\n    button: true,\n    onClick: toggleDSubmenu\n  }, \"Requests\", openDMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    \"in\": openDMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoRequeste\n  }, \"Published Requests\"), __jsx(MenuItem, {\n    onClick: gotoAddRequest\n  }, \"Add Product Request\")), __jsx(MenuItem, {\n    onClick: logout\n  }, \"Logout\")), __jsx(Dialog, {\n    open: open,\n    onClose: closeModal,\n    \"aria-labelledby\": \"form-dialog-title\",\n    className: classes.modal\n  }, __jsx(\"div\", {\n    className: classes.root\n  }, __jsx(Tabs, {\n    value: value,\n    onChange: handleChange,\n    variant: \"fullWidth\",\n    indicatorColor: \"primary\",\n    textColor: \"primary\"\n  }, __jsx(Tab, {\n    label: \"Login\"\n  }), __jsx(Tab, {\n    label: \"SignUp\"\n  })), __jsx(SwipeableViews, {\n    index: value,\n    onChangeIndex: handleChangeIndex\n  }, __jsx(\"div\", {\n    className: classes.Login\n  }, __jsx(\"div\", {\n    className: classes.Img\n  }, __jsx(\"img\", {\n    src: logo,\n    width: \"100\"\n  })), __jsx(AuthForm, {\n    type: \"login\"\n  })), __jsx(\"div\", null, __jsx(AuthForm, {\n    type: \"signup\"\n  }))))));\n};\n\nexport default Login_Register;","map":null,"metadata":{},"sourceType":"module"}