{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Layout from '../Layout';\nimport { Box, Container, Grid, Typography } from '@material-ui/core';\nimport IconCard from '../components/IconCard';\nimport EventIconCard from '../components/EventIconCard';\nimport ProductCard from '../components/ProductCard';\nimport EventCard from '../components/EventCard';\nimport Banner from '../components/Banner';\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\"; // import CardHorizontal from \"../components/CardHorizontal\";\n\nimport Testimonial from '../components/Testimonial';\nimport Button from '@material-ui/core/Button';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Swiper from 'react-id-swiper';\nimport ExpandMoreRoundedIcon from '@material-ui/icons/ExpandMoreRounded';\nimport Advertisement from '../components/Advertisement';\nimport { IconCardsData, EventIconCardsData, ProductCardsData, EventCardsData, OurConceptData, TestimonialData } from '../utils';\nimport { commonStyles, desktopStyles, mobileStyles, TabStyles } from '../styles'; // import { getProducts, getAds } from '../src/apis/global-api';\n\nconst fetch = require('node-fetch');\n\nconst useStyles = makeStyles(theme => _objectSpread(_objectSpread({}, commonStyles), {}, {\n  [theme.breakpoints.up('md')]: desktopStyles,\n  [theme.breakpoints.between('sm', 'md')]: TabStyles,\n  [theme.breakpoints.down('sm')]: mobileStyles\n}));\n\nIndex.getInitialProps = async () => {\n  const API_URL = process.env.api_url;\n  let res = await fetch(API_URL + \"/products?type=buy&paginate=10\");\n  const bproducts = await res.json();\n  res = await fetch(API_URL + \"/products?type=rental&paginate=10\");\n  const sproducts = await res.json();\n  res = await fetch(API_URL + \"/events?paginate=10\");\n  const events = await res.json();\n  let feedback = await fetch(API_URL + \"/all-feedback\");\n  const reviews = await feedback.json();\n  let adsres = await fetch(API_URL + \"/adverts\");\n  const ads = await adsres.json();\n  console.log('testhomedata', {\n    bproducts,\n    sproducts,\n    events,\n    reviews,\n    ads\n  });\n  return {\n    bproducts,\n    sproducts,\n    events,\n    reviews,\n    ads\n  };\n};\n\nexport default function Index({\n  bproducts,\n  sproducts,\n  events,\n  reviews,\n  ads\n}) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [opensell, setOpensell] = React.useState(false);\n  const anchorRef = React.useRef(null);\n  const anchorRefSell = React.useRef(null);\n  const {\n    0: buyType,\n    1: setbuyType\n  } = useState('');\n  const {\n    0: sellType,\n    1: setsellType\n  } = useState('');\n  const {\n    0: adslist,\n    1: setadslist\n  } = useState(ads);\n  const {\n    0: list_bproducts,\n    1: setlist_bproducts\n  } = useState(bproducts);\n  const {\n    0: list_sproducts,\n    1: setlist_sproducts\n  } = useState(sproducts);\n  const {\n    0: list_reviews,\n    1: setlist_reviews\n  } = useState(reviews);\n  const matches = useMediaQuery(theme => theme.breakpoints.down(\"sm\"));\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen);\n  };\n\n  const handleToggleSell = () => {\n    setOpensell(prevOpenSell => !prevOpenSell);\n  };\n\n  const handleClose = async (event, data) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n\n    if (data && data.title) {\n      const API_URL = process.env.api_url;\n      let res = await fetch(API_URL + \"/products?type=buy&paginate=10&cat_title=\" + data.title);\n      let result = await res.json();\n      setlist_bproducts(result);\n      setbuyType(data.title);\n    }\n  };\n\n  const handleCloseSell = async (event, data) => {\n    if (anchorRefSell.current && anchorRefSell.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n\n    if (data && data.title) {\n      const API_URL = process.env.api_url;\n      let res = await fetch(API_URL + \"/products?type=rental&paginate=10&cat_title=\" + data.title);\n      let result = await res.json();\n      setlist_sproducts(result);\n      setsellType(data.title);\n    }\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  } // return focus to the button when we transitioned from !open -> open\n\n\n  const prevOpen = React.useRef(open);\n  const prevOpenSell = React.useRef(opensell);\n  React.useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    if (prevOpenSell.current === true && open === false) {\n      anchorRefSell.current.focus();\n    }\n\n    prevOpen.current = open;\n    prevOpenSell.current = opensell;\n  }, [open]);\n  const params = {\n    loop: false,\n    watchOverflow: false,\n    slidesPerView: '4',\n    spaceBetween: 20,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev'\n    },\n    scrollbar: {\n      // el: \".swiper-scrollbar\",\n      hide: false\n    },\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true\n    },\n    breakpoints: {\n      0: {\n        slidesPerView: '1',\n        spaceBetween: 10,\n        centeredSlides: true\n      },\n      480: {\n        slidesPerView: '2'\n      },\n      768: {\n        slidesPerView: '2'\n      },\n      1100: {\n        slidesPerView: '3'\n      },\n      1400: {\n        slidesPerView: '4'\n      }\n    }\n  };\n  return __jsx(Layout, null, __jsx(Banner, null), adslist && adslist.homepage1 && __jsx(Advertisement, {\n    adImg: adslist.homepage1.link,\n    adlink: adslist.homepage1.openlink\n  }), __jsx(\"section\", {\n    className: classes.section\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.sectionHeader\n  }, __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Buy / Rent Products in your College\"), __jsx(Typography, null, \"Troubling for vital items in college? Don't be upset! Now, buy or sell A to Z products within your college.\")), __jsx(Box, {\n    className: classes.IconCardWrapper\n  }, IconCardsData.map((data, index) => __jsx(IconCard, {\n    key: data.id,\n    data: data\n  }))))), __jsx(\"section\", {\n    className: classes.section,\n    style: {\n      background: '#F3F3F3'\n    }\n  }, __jsx(Container, {\n    maxWidth: \"lg\"\n  }, __jsx(Box, {\n    className: classes.sectionHeader\n  }, __jsx(Typography, {\n    variant: \"h2\"\n  }, \"Events\"), __jsx(Typography, null, \"Events are so indispensable to miss yet we often missed them due to lack of knowledge. Get the list of events held in college with all the necessary information.\")), __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, EventIconCardsData.map(data => __jsx(EventIconCard, {\n    key: data.id,\n    data: data\n  }))))), adslist && adslist.homepage2 && __jsx(Advertisement, {\n    adImg: adslist.homepage2.link,\n    adlink: adslist.homepage2.openlink\n  }), __jsx(\"section\", {\n    className: classes.section\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.productsHeader\n  }, __jsx(\"div\", null, __jsx(Typography, {\n    variant: \"h5\"\n  }, \"Newly Added Products\"), __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Buy\")), __jsx(\"div\", null, __jsx(Button, {\n    ref: anchorRef,\n    \"aria-controls\": open ? 'menu-list-grow' : undefined,\n    \"aria-haspopup\": \"true\",\n    onClick: handleToggle,\n    className: classes.catBtn\n  }, buyType ? buyType : 'Category', \" \", __jsx(ExpandMoreRoundedIcon, null)), __jsx(Popper, {\n    open: open,\n    anchorEl: anchorRef.current,\n    role: undefined,\n    transition: true,\n    disablePortal: true\n  }, ({\n    TransitionProps,\n    placement\n  }) => __jsx(Grow, _extends({}, TransitionProps, {\n    style: {\n      transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n    }\n  }), __jsx(Paper, null, __jsx(ClickAwayListener, {\n    onClickAway: handleClose\n  }, __jsx(MenuList, {\n    autoFocusItem: open,\n    id: \"menu-list-grow\",\n    onKeyDown: handleListKeyDown\n  }, IconCardsData.map((data, index) => __jsx(MenuItem, {\n    onClick: e => handleClose(e, data)\n  }, data.title))))))))), list_bproducts && list_bproducts.data.length > 0 && __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, !matches && list_bproducts.data.length > 4 && __jsx(Swiper, params, list_bproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  })))), !matches && list_bproducts.data.length < 4 && list_bproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  }))), matches && list_bproducts.data.length > 2 && __jsx(Swiper, params, list_bproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  })))), matches && list_bproducts.data.length < 2 && list_bproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  }))))), __jsx(Box, {\n    className: classes.spacingBox\n  }), __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.productsHeader\n  }, __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Rent\"), __jsx(\"div\", null, __jsx(Button, {\n    ref: anchorRefSell,\n    \"aria-controls\": opensell ? 'menu-list-grow' : undefined,\n    \"aria-haspopup\": \"true\",\n    onClick: handleToggleSell,\n    className: classes.catBtn\n  }, sellType ? sellType : 'Category', \" \", __jsx(ExpandMoreRoundedIcon, null)), __jsx(Popper, {\n    open: opensell,\n    anchorEl: anchorRefSell.current,\n    role: undefined,\n    transition: true,\n    disablePortal: true\n  }, ({\n    TransitionProps,\n    placement\n  }) => __jsx(Grow, _extends({}, TransitionProps, {\n    style: {\n      transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n    }\n  }), __jsx(Paper, null, __jsx(ClickAwayListener, {\n    onClickAway: handleCloseSell\n  }, __jsx(MenuList, {\n    autoFocusItem: open,\n    id: \"menu-list-grow\",\n    onKeyDown: handleListKeyDown\n  }, IconCardsData.map((data, index) => __jsx(MenuItem, {\n    onClick: e => handleCloseSell(e, data)\n  }, data.title))))))))), __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, !matches && list_sproducts.data.length > 4 && __jsx(Swiper, params, list_sproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  })))), !matches && list_sproducts.data.length < 4 && list_sproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  }))), matches && list_sproducts.data.length > 2 && __jsx(Swiper, params, list_sproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  })))), matches && list_sproducts.data.length < 2 && list_sproducts.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(ProductCard, {\n    data: data\n  })))))), __jsx(\"section\", {\n    className: `${classes.section} ${classes.ptZero}`\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.productsHeader\n  }, __jsx(Typography, {\n    variant: \"h5\"\n  }, \"Newly Added Events\")), __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, !matches && events && events.data.length > 4 && __jsx(Swiper, params, events.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(EventCard, {\n    data: data\n  })))), events && !matches && events.data.length <= 4 && events.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(EventCard, {\n    data: data\n  }))), events && matches && events.data.length > 2 && __jsx(Swiper, params, events.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(EventCard, {\n    data: data\n  })))), events && matches && events.data.length <= 2 && events.data.map(data => __jsx(\"div\", {\n    key: data.id\n  }, __jsx(EventCard, {\n    data: data\n  })))))), adslist && adslist.homepage3 && __jsx(Advertisement, {\n    adImg: adslist.homepage3.link,\n    adlink: adslist.homepage3.openlink\n  }), __jsx(\"section\", {\n    className: classes.section,\n    style: {\n      background: 'var(--theme-light)'\n    }\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.sectionHeader\n  }, __jsx(Typography, {\n    variant: \"h2\"\n  }, \"FEEDBACK\"), __jsx(Typography, null)), __jsx(Testimonial, {\n    data: list_reviews\n  }))), adslist && adslist.homepage4 && __jsx(Advertisement, {\n    adImg: adslist.homepage4.link,\n    adlink: adslist.homepage4.openlink\n  }));\n} // Index.getInitialProps = ({ query: { id } }) => {\n//   console.log(\"Response is \");\n//   return { postId: id };\n// };","map":null,"metadata":{},"sourceType":"module"}