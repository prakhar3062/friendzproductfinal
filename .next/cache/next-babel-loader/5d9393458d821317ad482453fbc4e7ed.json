{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component, useState, useEffect } from \"react\";\nimport Products from \"./../containers/products\";\nimport fetch from \"node-fetch\";\nimport { useSelector } from \"react-redux\";\nimport Modal from \"./../components/Modal\";\nimport { SELECTED_FILTER_RESET, SELECTED_FILTER_UNIVERSITY } from \"./../constants\";\n\nfunction ProductsPage({\n  query\n}) {\n  const user = useSelector(state => state.auth_user.user);\n  const {\n    0: open,\n    1: setopen\n  } = useState(false);\n  const {\n    0: url,\n    1: seturl\n  } = useState(\"\");\n  const {\n    0: m_uni,\n    1: setm_uni\n  } = useState(\"\");\n  useEffect(() => {\n    setQuery(query); // setModalStatus(query)\n  }, [query]); // const setModalStatus = (query) => {\n  //   const { m_uni } = query;\n  //   console.log('testttt', !m_uni)\n  //   console.log('testttt', !user, user)\n  // }\n\n  const setQuery = query => {\n    let {\n      s,\n      m_city,\n      m_cat,\n      m_uni,\n      type\n    } = query;\n    let url = s ? `?s=${s}&paginate=12` : \"?paginate=12\";\n    let data = localStorage.getItem(SELECTED_FILTER_UNIVERSITY);\n    let selection_reset = localStorage.getItem(SELECTED_FILTER_RESET);\n    data = data && JSON.parse(data) ? JSON.parse(data).response : \"\";\n\n    if (!m_uni && data && data.length) {\n      m_uni = !selection_reset ? data[0].name : m_uni;\n    } else if (!m_uni && !user.id) {\n      setopen(true);\n    } else if (!m_uni && user.university && user.university.name) {\n      m_uni = !selection_reset ? user.university.name : m_uni;\n    }\n\n    setm_uni(m_uni);\n\n    if (m_city) {\n      url = url + \"&m_city=\" + m_city;\n    }\n\n    if (m_cat) {\n      url = url + \"&m_cat=\" + m_cat;\n    }\n\n    if (m_uni) {\n      url = url + \"&m_uni=\" + m_uni;\n    } //  else if (user && user.university) {\n    //   url = url + '&m_uni=' + user.university.name\n    // }\n\n\n    if (type) {\n      url = url + \"&type=\" + type;\n    }\n\n    seturl(url);\n  };\n\n  return __jsx(\"div\", null, open && __jsx(Modal, {\n    openStatus: open\n  }), __jsx(Products, {\n    url: url,\n    m_uni: m_uni,\n    query: query\n  }));\n}\n\nProductsPage.getInitialProps = ({\n  query\n}) => {\n  return {\n    query\n  };\n};\n\nexport default ProductsPage;","map":{"version":3,"sources":["E:/jay/frontend/src/pages/products.js"],"names":["React","Component","useState","useEffect","Products","fetch","useSelector","Modal","SELECTED_FILTER_RESET","SELECTED_FILTER_UNIVERSITY","ProductsPage","query","user","state","auth_user","open","setopen","url","seturl","m_uni","setm_uni","setQuery","s","m_city","m_cat","type","data","localStorage","getItem","selection_reset","JSON","parse","response","length","name","id","university","getInitialProps"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport Products from \"./../containers/products\";\r\nimport fetch from \"node-fetch\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Modal from \"./../components/Modal\";\r\nimport {\r\n  SELECTED_FILTER_RESET,\r\n  SELECTED_FILTER_UNIVERSITY,\r\n} from \"./../constants\";\r\n\r\nfunction ProductsPage({ query }) {\r\n  const user = useSelector((state) => state.auth_user.user);\r\n  const [open, setopen] = useState(false);\r\n  const [url, seturl] = useState(\"\");\r\n  const [m_uni, setm_uni] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setQuery(query);\r\n    // setModalStatus(query)\r\n  }, [query]);\r\n\r\n  // const setModalStatus = (query) => {\r\n  //   const { m_uni } = query;\r\n  //   console.log('testttt', !m_uni)\r\n  //   console.log('testttt', !user, user)\r\n\r\n  // }\r\n\r\n  const setQuery = (query) => {\r\n    let { s, m_city, m_cat, m_uni, type } = query;\r\n\r\n    let url = s ? `?s=${s}&paginate=12` : \"?paginate=12\";\r\n\r\n    let data = localStorage.getItem(SELECTED_FILTER_UNIVERSITY);\r\n    let selection_reset = localStorage.getItem(SELECTED_FILTER_RESET);\r\n    data = data && JSON.parse(data) ? JSON.parse(data).response : \"\";\r\n\r\n    if (!m_uni && data && data.length) {\r\n      m_uni = !selection_reset ? data[0].name : m_uni;\r\n    } else if (!m_uni && !user.id) {\r\n      setopen(true);\r\n    } else if (!m_uni && user.university && user.university.name) {\r\n      m_uni = !selection_reset ? user.university.name : m_uni;\r\n    }\r\n    setm_uni(m_uni);\r\n\r\n    if (m_city) {\r\n      url = url + \"&m_city=\" + m_city;\r\n    }\r\n    if (m_cat) {\r\n      url = url + \"&m_cat=\" + m_cat;\r\n    }\r\n    if (m_uni) {\r\n      url = url + \"&m_uni=\" + m_uni;\r\n    }\r\n    //  else if (user && user.university) {\r\n    //   url = url + '&m_uni=' + user.university.name\r\n    // }\r\n    if (type) {\r\n      url = url + \"&type=\" + type;\r\n    }\r\n    seturl(url);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {open && <Modal openStatus={open} />}\r\n      <Products url={url} m_uni={m_uni} query={query} />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nProductsPage.getInitialProps = ({ query }) => {\r\n  return { query };\r\n};\r\nexport default ProductsPage;\r\n"]},"metadata":{},"sourceType":"module"}