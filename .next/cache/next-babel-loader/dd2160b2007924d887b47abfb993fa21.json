{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Layout from '../Layout';\nimport { Box, Container, Grid, Typography } from '@material-ui/core';\nimport IconCard from '../components/IconCard';\nimport EventIconCard from '../components/EventIconCard';\nimport ProductCard from '../components/ProductCard';\nimport EventCard from '../components/EventCard';\nimport Banner from '../components/Banner';\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\"; // import CardHorizontal from \"../components/CardHorizontal\";\n\nimport Testimonial from '../components/Testimonial';\nimport Button from '@material-ui/core/Button';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Swiper from 'react-id-swiper';\nimport ExpandMoreRoundedIcon from '@material-ui/icons/ExpandMoreRounded';\nimport Advertisement from '../components/Advertisement';\nimport { IconCardsData, EventIconCardsData, ProductCardsData, EventCardsData, OurConceptData, TestimonialData } from '../utils';\nimport { commonStyles, desktopStyles, mobileStyles, TabStyles } from '../styles'; // import { getProducts, getAds } from '../src/apis/global-api';\n\nvar fetch = require('node-fetch');\n\nvar useStyles = makeStyles(function (theme) {\n  var _objectSpread2;\n\n  return _objectSpread(_objectSpread({}, commonStyles), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, theme.breakpoints.up('md'), desktopStyles), _defineProperty(_objectSpread2, theme.breakpoints.between('sm', 'md'), TabStyles), _defineProperty(_objectSpread2, theme.breakpoints.down('sm'), mobileStyles), _objectSpread2));\n});\nIndex.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  var API_URL, res, bproducts, sproducts, events, feedback, reviews, adsres, ads;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          API_URL = process.env.api_url;\n          _context.next = 3;\n          return fetch(API_URL + \"/products?type=buy&paginate=10\");\n\n        case 3:\n          res = _context.sent;\n          _context.next = 6;\n          return res.json();\n\n        case 6:\n          bproducts = _context.sent;\n          _context.next = 9;\n          return fetch(API_URL + \"/products?type=rental&paginate=10\");\n\n        case 9:\n          res = _context.sent;\n          _context.next = 12;\n          return res.json();\n\n        case 12:\n          sproducts = _context.sent;\n          _context.next = 15;\n          return fetch(API_URL + \"/events?paginate=10\");\n\n        case 15:\n          res = _context.sent;\n          _context.next = 18;\n          return res.json();\n\n        case 18:\n          events = _context.sent;\n          _context.next = 21;\n          return fetch(API_URL + \"/all-feedback\");\n\n        case 21:\n          feedback = _context.sent;\n          _context.next = 24;\n          return feedback.json();\n\n        case 24:\n          reviews = _context.sent;\n          _context.next = 27;\n          return fetch(API_URL + \"/adverts\");\n\n        case 27:\n          adsres = _context.sent;\n          _context.next = 30;\n          return adsres.json();\n\n        case 30:\n          ads = _context.sent;\n          console.log('testhomedata', {\n            bproducts: bproducts,\n            sproducts: sproducts,\n            events: events,\n            reviews: reviews,\n            ads: ads\n          });\n          return _context.abrupt(\"return\", {\n            bproducts: bproducts,\n            sproducts: sproducts,\n            events: events,\n            reviews: reviews,\n            ads: ads\n          });\n\n        case 33:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\nexport default function Index(_ref2) {\n  var bproducts = _ref2.bproducts,\n      sproducts = _ref2.sproducts,\n      events = _ref2.events,\n      reviews = _ref2.reviews,\n      ads = _ref2.ads;\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      opensell = _React$useState4[0],\n      setOpensell = _React$useState4[1];\n\n  var anchorRef = React.useRef(null);\n  var anchorRefSell = React.useRef(null);\n\n  var _useState = useState(''),\n      buyType = _useState[0],\n      setbuyType = _useState[1];\n\n  var _useState2 = useState(''),\n      sellType = _useState2[0],\n      setsellType = _useState2[1];\n\n  var _useState3 = useState(ads),\n      adslist = _useState3[0],\n      setadslist = _useState3[1];\n\n  var _useState4 = useState(bproducts),\n      list_bproducts = _useState4[0],\n      setlist_bproducts = _useState4[1];\n\n  var _useState5 = useState(sproducts),\n      list_sproducts = _useState5[0],\n      setlist_sproducts = _useState5[1];\n\n  var _useState6 = useState(reviews),\n      list_reviews = _useState6[0],\n      setlist_reviews = _useState6[1];\n\n  var matches = useMediaQuery(function (theme) {\n    return theme.breakpoints.down(\"sm\");\n  });\n\n  var handleToggle = function handleToggle() {\n    setOpen(function (prevOpen) {\n      return !prevOpen;\n    });\n  };\n\n  var handleToggleSell = function handleToggleSell() {\n    setOpensell(function (prevOpenSell) {\n      return !prevOpenSell;\n    });\n  };\n\n  var handleClose = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event, data) {\n      var API_URL, res, result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(anchorRef.current && anchorRef.current.contains(event.target))) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 2:\n              setOpen(false);\n\n              if (!(data && data.title)) {\n                _context2.next = 13;\n                break;\n              }\n\n              API_URL = process.env.api_url;\n              _context2.next = 7;\n              return fetch(API_URL + \"/products?type=buy&paginate=10&cat_title=\" + data.title);\n\n            case 7:\n              res = _context2.sent;\n              _context2.next = 10;\n              return res.json();\n\n            case 10:\n              result = _context2.sent;\n              setlist_bproducts(result);\n              setbuyType(data.title);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleClose(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleCloseSell = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event, data) {\n      var API_URL, res, result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(anchorRefSell.current && anchorRefSell.current.contains(event.target))) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 2:\n              setOpen(false);\n\n              if (!(data && data.title)) {\n                _context3.next = 13;\n                break;\n              }\n\n              API_URL = process.env.api_url;\n              _context3.next = 7;\n              return fetch(API_URL + \"/products?type=rental&paginate=10&cat_title=\" + data.title);\n\n            case 7:\n              res = _context3.sent;\n              _context3.next = 10;\n              return res.json();\n\n            case 10:\n              result = _context3.sent;\n              setlist_sproducts(result);\n              setsellType(data.title);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleCloseSell(_x3, _x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  } // return focus to the button when we transitioned from !open -> open\n\n\n  var prevOpen = React.useRef(open);\n  var prevOpenSell = React.useRef(opensell);\n  React.useEffect(function () {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    if (prevOpenSell.current === true && open === false) {\n      anchorRefSell.current.focus();\n    }\n\n    prevOpen.current = open;\n    prevOpenSell.current = opensell;\n  }, [open]);\n  var params = {\n    loop: false,\n    watchOverflow: false,\n    slidesPerView: '4',\n    spaceBetween: 20,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev'\n    },\n    scrollbar: {\n      // el: \".swiper-scrollbar\",\n      hide: false\n    },\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true\n    },\n    breakpoints: {\n      0: {\n        slidesPerView: '1',\n        spaceBetween: 10,\n        centeredSlides: true\n      },\n      480: {\n        slidesPerView: '2'\n      },\n      768: {\n        slidesPerView: '2'\n      },\n      1100: {\n        slidesPerView: '3'\n      },\n      1400: {\n        slidesPerView: '4'\n      }\n    }\n  };\n  return __jsx(Layout, null, __jsx(Banner, null), adslist && adslist.homepage1 && __jsx(Advertisement, {\n    adImg: adslist.homepage1.link,\n    adlink: adslist.homepage1.openlink\n  }), __jsx(\"section\", {\n    className: classes.section\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.sectionHeader\n  }, __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Buy / Rent Products in your College\"), __jsx(Typography, null, \"Troubling for vital items in college? Don't be upset! Now, buy or sell A to Z products within your college.\")), __jsx(Box, {\n    className: classes.IconCardWrapper\n  }, IconCardsData.map(function (data, index) {\n    return __jsx(IconCard, {\n      key: data.id,\n      data: data\n    });\n  })))), __jsx(\"section\", {\n    className: classes.section,\n    style: {\n      background: '#F3F3F3'\n    }\n  }, __jsx(Container, {\n    maxWidth: \"lg\"\n  }, __jsx(Box, {\n    className: classes.sectionHeader\n  }, __jsx(Typography, {\n    variant: \"h2\"\n  }, \"Events\"), __jsx(Typography, null, \"Events are so indispensable to miss yet we often missed them due to lack of knowledge. Get the list of events held in college with all the necessary information.\")), __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, EventIconCardsData.map(function (data) {\n    return __jsx(EventIconCard, {\n      key: data.id,\n      data: data\n    });\n  })))), adslist && adslist.homepage2 && __jsx(Advertisement, {\n    adImg: adslist.homepage2.link,\n    adlink: adslist.homepage2.openlink\n  }), __jsx(\"section\", {\n    className: classes.section\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.productsHeader\n  }, __jsx(\"div\", null, __jsx(Typography, {\n    variant: \"h5\"\n  }, \"Newly Added Products\"), __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Buy\")), __jsx(\"div\", null, __jsx(Button, {\n    ref: anchorRef,\n    \"aria-controls\": open ? 'menu-list-grow' : undefined,\n    \"aria-haspopup\": \"true\",\n    onClick: handleToggle,\n    className: classes.catBtn\n  }, buyType ? buyType : 'Category', \" \", __jsx(ExpandMoreRoundedIcon, null)), __jsx(Popper, {\n    open: open,\n    anchorEl: anchorRef.current,\n    role: undefined,\n    transition: true,\n    disablePortal: true\n  }, function (_ref5) {\n    var TransitionProps = _ref5.TransitionProps,\n        placement = _ref5.placement;\n    return __jsx(Grow, _extends({}, TransitionProps, {\n      style: {\n        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n      }\n    }), __jsx(Paper, null, __jsx(ClickAwayListener, {\n      onClickAway: handleClose\n    }, __jsx(MenuList, {\n      autoFocusItem: open,\n      id: \"menu-list-grow\",\n      onKeyDown: handleListKeyDown\n    }, IconCardsData.map(function (data, index) {\n      return __jsx(MenuItem, {\n        onClick: function onClick(e) {\n          return handleClose(e, data);\n        }\n      }, data.title);\n    })))));\n  }))), list_bproducts && list_bproducts.data.length > 0 && __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, !matches && list_bproducts.data.length > 4 && __jsx(Swiper, params, list_bproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  })), !matches && list_bproducts.data.length < 4 && list_bproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  }), matches && list_bproducts.data.length > 2 && __jsx(Swiper, params, list_bproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  })), matches && list_bproducts.data.length < 2 && list_bproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  }))), __jsx(Box, {\n    className: classes.spacingBox\n  }), __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.productsHeader\n  }, __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Rent\"), __jsx(\"div\", null, __jsx(Button, {\n    ref: anchorRefSell,\n    \"aria-controls\": opensell ? 'menu-list-grow' : undefined,\n    \"aria-haspopup\": \"true\",\n    onClick: handleToggleSell,\n    className: classes.catBtn\n  }, sellType ? sellType : 'Category', \" \", __jsx(ExpandMoreRoundedIcon, null)), __jsx(Popper, {\n    open: opensell,\n    anchorEl: anchorRefSell.current,\n    role: undefined,\n    transition: true,\n    disablePortal: true\n  }, function (_ref6) {\n    var TransitionProps = _ref6.TransitionProps,\n        placement = _ref6.placement;\n    return __jsx(Grow, _extends({}, TransitionProps, {\n      style: {\n        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n      }\n    }), __jsx(Paper, null, __jsx(ClickAwayListener, {\n      onClickAway: handleCloseSell\n    }, __jsx(MenuList, {\n      autoFocusItem: open,\n      id: \"menu-list-grow\",\n      onKeyDown: handleListKeyDown\n    }, IconCardsData.map(function (data, index) {\n      return __jsx(MenuItem, {\n        onClick: function onClick(e) {\n          return handleCloseSell(e, data);\n        }\n      }, data.title);\n    })))));\n  }))), __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, !matches && list_sproducts.data.length > 4 && __jsx(Swiper, params, list_sproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  })), !matches && list_sproducts.data.length < 4 && list_sproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  }), matches && list_sproducts.data.length > 2 && __jsx(Swiper, params, list_sproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  })), matches && list_sproducts.data.length < 2 && list_sproducts.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(ProductCard, {\n      data: data\n    }));\n  })))), __jsx(\"section\", {\n    className: \"\".concat(classes.section, \" \").concat(classes.ptZero)\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.productsHeader\n  }, __jsx(Typography, {\n    variant: \"h5\"\n  }, \"Newly Added Events\")), __jsx(Box, {\n    className: classes.EventIconCardWrapper\n  }, !matches && events && events.data.length > 4 && __jsx(Swiper, params, events.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(EventCard, {\n      data: data\n    }));\n  })), events && !matches && events.data.length <= 4 && events.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(EventCard, {\n      data: data\n    }));\n  }), events && matches && events.data.length > 2 && __jsx(Swiper, params, events.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(EventCard, {\n      data: data\n    }));\n  })), events && matches && events.data.length <= 2 && events.data.map(function (data) {\n    return __jsx(\"div\", {\n      key: data.id\n    }, __jsx(EventCard, {\n      data: data\n    }));\n  })))), adslist && adslist.homepage3 && __jsx(Advertisement, {\n    adImg: adslist.homepage3.link,\n    adlink: adslist.homepage3.openlink\n  }), __jsx(\"section\", {\n    className: classes.section,\n    style: {\n      background: 'var(--theme-light)'\n    }\n  }, __jsx(Container, {\n    maxWidth: \"xl\"\n  }, __jsx(Box, {\n    className: classes.sectionHeader\n  }, __jsx(Typography, {\n    variant: \"h2\"\n  }, \"FEEDBACK\"), __jsx(Typography, null)), __jsx(Testimonial, {\n    data: list_reviews\n  }))), adslist && adslist.homepage4 && __jsx(Advertisement, {\n    adImg: adslist.homepage4.link,\n    adlink: adslist.homepage4.openlink\n  }));\n} // Index.getInitialProps = ({ query: { id } }) => {\n//   console.log(\"Response is \");\n//   return { postId: id };\n// };","map":null,"metadata":{},"sourceType":"module"}