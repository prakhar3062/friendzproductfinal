_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[47],{HnPO:function(_,e,t){"use strict";var r=t("TqRt"),a=t("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(t("q1tI")),s=(0,r(t("8/g6")).default)(i.createElement("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"}),"School");e.default=s},IIul:function(_,e,t){"use strict";t.r(e);var r=t("o0o1"),a=t.n(r),i=t("HaE+"),s=t("q1tI"),o=t.n(s),u=t("nOHt"),n=t("/MKj"),c=t("g3Wz"),l=t("vGTh"),E=o.a.createElement,p=function(_){var e=_.query,t=Object(u.useRouter)(),r=Object(n.c)((function(_){return _.auth_user.accessToken})),o=Object(n.c)((function(_){return _.auth_user.user})),p=Object(s.useState)(""),d=p[0],O=p[1],P=e.request_id;Object(s.useEffect)((function(){r||t.push("/"),P&&m()}),[e]);var m=function(){var _=Object(i.a)(a.a.mark((function _(){return a.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:Object(l.n)(P).then((function(_){O(_)}));case 1:case"end":return _.stop()}}),_)})));return function(){return _.apply(this,arguments)}}();return d?E(c.a,{user:o,formtype:"edit",product:d}):null};p.getInitialProps=function(_){return{query:_.query}},e.default=p},JOlb:function(_,e,t){"use strict";var r=t("TqRt"),a=t("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(t("q1tI")),s=(0,r(t("8/g6")).default)(i.createElement("path",{d:"M3 4l9 16 9-16H3zm3.38 2h11.25L12 16 6.38 6z"}),"Details");e.default=s},g3Wz:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return NewRequest}));var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("wx14"),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("rePB"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("R/WZ"),_Layout__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1i9w"),_material_ui_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Ji2X"),_material_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("tRbT"),_material_ui_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("30+C"),_material_ui_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("oa/T"),_material_ui_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("ofer"),_material_ui_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("r9w1"),_material_ui_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("Z3vd"),material_ui_dropzone__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("LnxZ"),_material_ui_icons_Subtitles__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Mewm"),_material_ui_icons_Subtitles__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_material_ui_icons_Subtitles__WEBPACK_IMPORTED_MODULE_13__),_material_ui_icons_Details__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("JOlb"),_material_ui_icons_Details__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_material_ui_icons_Details__WEBPACK_IMPORTED_MODULE_14__),_material_ui_icons_School__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("HnPO"),_material_ui_icons_School__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_material_ui_icons_School__WEBPACK_IMPORTED_MODULE_15__),_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("+bXu"),_material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("+Isj"),_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("iae6"),_apis_global_api__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("vGTh"),_apis_auth_api__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("2mpK"),react_redux__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("/MKj"),_redux_actions_auth__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("q9EX"),next_router__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("nOHt"),next_router__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_23__),_Utils_helpers__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("j2qj"),__jsx=react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement;function ownKeys(_,e){var t=Object.keys(_);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(_);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(_,e).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(_){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach((function(e){Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(e){Object.defineProperty(_,e,Object.getOwnPropertyDescriptor(t,e))}))}return _}var useStyles=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__.a)((function(_){return{section:{padding:"5rem 0",position:"relative",overflow:"hidden"},form:{display:"flex",flexWrap:"wrap"},pdTitle:{marginBottom:"2rem"},card:{boxShadow:"none",border:"#ccc solid 1px",height:"100%",background:"rgba(255, 255, 255, 0.6)","&::before":{content:'""',background:"url(/static/images/circleCenter.svg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",top:"55%",left:"50%",transform:"translate(-50%, -50%)",height:"540px",width:"540px",position:"absolute",zIndex:"-1"},"&::after":{content:'""',background:"url(/static/images/circleCenter.svg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",bottom:"-15rem",left:"-25rem",height:"50rem",width:"50rem",position:"absolute",zIndex:"-1"}},cardBody:{padding:"2rem !important"},formInput:Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)({marginBottom:"2rem",width:"50%"},_.breakpoints.down("sm"),{width:"100%"}),formInputFullWidth:{width:"100%"},formInputField:{width:"80%","& .MuiTextField-root":{width:"100%"}},formInputFieldFull:Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)({},_.breakpoints.up("sm"),{width:"90%","& .MuiTextField-root":{width:"100%"},"& textarea":{width:"100%",border:"none",borderBottom:"solid 1px #ccc",height:"100px"},"& textarea:focus":{outline:"none",borderBottom:"solid 1px var(--theme)"}}),formControl:{width:"100%"},Button:{width:"80%",height:"50px",marginTop:"1rem",backgroundColor:"var(--theme)",color:"#fff",fontSize:"1rem",boxShadow:"none",maxWidth:"200px"},Images:{display:"flex",flexWrap:"wrap","& img":{width:"125px",height:"125px",objectFit:"contain",marginRight:"10px",marginBottom:"10px",border:"solid 1px #333 "},"& video":{width:"125px",height:"125px",objectFit:"contain",marginRight:"10px",marginBottom:"10px",border:"solid 1px #333 "}},AddBtn:{border:"solid 1px #333",width:"125px",height:"125px",display:"grid"},dialogeCustom:{"& .MuiGrid-spacing-xs-8":{width:"100%",margin:"0"}}}}));function NewRequest(_ref){var user=_ref.user,_ref$formtype=_ref.formtype,formtype=void 0===_ref$formtype?"add":_ref$formtype,_ref$product=_ref.product,product=void 0===_ref$product?{}:_ref$product,classes=useStyles(),_useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),open=_useState[0],setOpen=_useState[1],_useState2=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)([]),files=_useState2[0],setfiles=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)([]),filesInfo=_useState3[0],setfilesInfo=_useState3[1],_useState4=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(product.title),title=_useState4[0],settitle=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(product.type),type=_useState5[0],settype=_useState5[1],_useState6=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(product.description),description=_useState6[0],setdescription=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({name:product.university?product.university.name:"",id:product.university?product.university.id:""}),university=_useState7[0],setuniversity=_useState7[1],_useState8=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({name:product.category?product.category.name:"",id:product.category?product.category.id:""}),category=_useState8[0],setcategory=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({}),errs=_useState9[0],seterrs=_useState9[1],_useState10=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(product.university?[{name:product.university.name,id:product.university.id}]:[]),universities=_useState10[0],setuniversities=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(product.category?[{name:product.category.name,id:product.category.id}]:[]),categories=_useState11[0],setcategories=_useState11[1],_useState12=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),loading=_useState12[0],setloading=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),loadingUni=_useState13[0],setloadingUni=_useState13[1],_useState14=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),backdrop=_useState14[0],setbackdrop=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(product.time_period),time_period=_useState15[0],settime_period=_useState15[1],_useState16=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)([]),formerrs=_useState16[0],setformerrs=_useState16[1],dispatch=Object(react_redux__WEBPACK_IMPORTED_MODULE_21__.b)(),router=Object(next_router__WEBPACK_IMPORTED_MODULE_23__.useRouter)(),handleClose=function(){setOpen(!1)},handleOpen=function(){setOpen(!0)},updateformData=function updateformData(e,type){e.preventDefault(),eval("set"+type+"('"+e.target.value+"')")},handleUniSearch=function(_){var e=_?_.target.value:"";e&&(setloadingUni(!0),Object(_apis_global_api__WEBPACK_IMPORTED_MODULE_19__.s)(e).then((function(_){setloadingUni(!1),setuniversities(_)})))},handleCatSearch=function(_){var e=_?_.target.value:"";e&&(setloading(!0),Object(_apis_global_api__WEBPACK_IMPORTED_MODULE_19__.p)(e).then((function(_){setloading(!1),setcategories(_.data)})))},checkValidation=function(){return setformerrs(""),!!(title&&description&&university.name)||(setformerrs(["All fields are required"]),!1)},handleSubmit=function(_,e){if(_&&_.preventDefault(),checkValidation()){setbackdrop(!0);var t=universities.find((function(_){return _.name==university.name})),r={title:title,description:description,university_id:t.id,category_id:0,user_id:user.id,type:0,files:files,active:!0};"edit"==formtype&&product.id?Object(_apis_auth_api__WEBPACK_IMPORTED_MODULE_20__.m)(r,product.id).then((function(_){_.error?(setbackdrop(!1),setformerrs(_.msg)):router.push("/profile/requests")})):Object(_apis_auth_api__WEBPACK_IMPORTED_MODULE_20__.c)(r).then((function(_){_.error?(setbackdrop(!1),setformerrs(_.msg)):router.push("/profile/requests")}))}},removeImage=function(_){var e=files.filter((function(e,t){return t!==_})),t=filesInfo.filter((function(e,t){return t!==_}));setfilesInfo(t),setfiles(e)};return __jsx(_Layout__WEBPACK_IMPORTED_MODULE_4__.a,null,__jsx("section",{className:classes.section},backdrop&&__jsx(_material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_17__.a,{className:classes.backdrop,open:backdrop},__jsx(_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_18__.a,{color:"inherit"})),__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{maxWidth:"xl"},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{container:!0},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{item:!0,lg:9,md:9,sm:8,xs:12,style:{margin:"auto"}},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{className:classes.card},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.a,{className:classes.cardBody},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{variant:"h4",style:{marginBottom:"1rem"}},"add"==formtype?"Add":"Edit"," Product Request"),__jsx("form",{className:classes.form,noValidate:!0,autoComplete:"off",onSubmit:handleSubmit},__jsx("div",{className:classes.formInput},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{container:!0,spacing:1,alignItems:"flex-end"},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{item:!0},__jsx(_material_ui_icons_Subtitles__WEBPACK_IMPORTED_MODULE_13___default.a,null)),__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{item:!0,className:classes.formInputField},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_10__.a,{id:"fname",label:"Title",value:title,onChange:function(_){return updateformData(_,"title")}})))),__jsx("div",{className:classes.formInput},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{container:!0,spacing:1,alignItems:"flex-end"},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{item:!0},__jsx(_material_ui_icons_School__WEBPACK_IMPORTED_MODULE_15___default.a,null)),__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{item:!0,className:classes.formInputField},__jsx(_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_16__.a,{required:!0,options:universities,getOptionLabel:function(_){return _.name},getOptionSelected:function(_,e){return _.name===e.name},loading:loadingUni,value:university,onInputChange:handleUniSearch,onSelect:function(_){return setuniversity({name:_.target.value})},renderInput:function(_){return __jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_10__.a,Object(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.a)({},_,{label:"Search College",InputProps:_objectSpread(_objectSpread({},_.InputProps),{},{endAdornment:__jsx(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,loadingUni?__jsx(_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_18__.a,{color:"primary",size:20}):null,_.InputProps.endAdornment)})}))}}),errs.university&&__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{color:"error"},"Please select a university.")))),__jsx("div",{className:"".concat(classes.formInput," ").concat(classes.formInputFullWidth)},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{container:!0,spacing:1,alignItems:"flex-end"},__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{item:!0},__jsx(_material_ui_icons_Details__WEBPACK_IMPORTED_MODULE_14___default.a,null)),__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{item:!0,className:"".concat(classes.formInputField," ").concat(classes.formInputFieldFull)},__jsx("textarea",{id:"about",label:"Description",value:description,placeholder:"Description",onChange:function(_){return updateformData(_,"description")}})))),__jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__.a,{type:"submit",variant:"contained",className:classes.Button},"add"==formtype?"Add":"Edit"," Product Request")),formerrs.length>0&&formerrs.map((function(_,e){return __jsx(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{color:"error",key:"error".concat(e)},_)})))))))))}},uaWr:function(_,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/request/edit/[request_id]",function(){return t("IIul")}])}},[["uaWr",0,1,5,2,3,4,6,11,16]]]);